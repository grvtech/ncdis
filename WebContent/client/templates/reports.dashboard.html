
<div class="reportsbody_dashboard" >
	<div id="tabs">
	  <ul>
	    <li id="dashtab"><a href="#dashboard">Clinical Data</a></li>
	    <!--  <li id="listtab"><a href="/ncdis/client/templates/reports.lists.html">Clinical Lists</a></li> -->
	    <!-- <li id="perstab"><a href="/ncdis/client/templates/reports.personal.html">Personal Reports</a></li> -->
	    <!--<li id="admintab"><a href="/ncdis/client/templates/reports.admin.html">Admin Reports</a></li> -->
	    <li id="customtab"><a href="/ncdis/client/templates/reports.custom.html">Custom Reports</a></li>
	    <!--  <li id="surtab"><a href="/ncdis/client/templates/reports.sur.html">Surveillance Data</a></li> -->
	    <li id="surtab"><a href="#surveillance">Indicators and Outcomes</a></li>
	    <li id="pattab"><a href="#pvalidation">Patient Validation Tool</a></li>
	    <li id="panditab"><a href="#pandi">Prevalence and Incidence</a></li>
	    <li id="importomnilabtab"><a href="#importomnilab">Import Data from Omnilab</a></li>
	  </ul>
	  <div id="fullscreen-button" class="cisbutton ">Full screen dashboard</div>
	  <div id="dashboard"></div>
	  <div id="surveillance"></div>
	  <div id="pvalidation"></div>
	  <div id="pandi"></div>
	  <div id="importomnilab"></div>
	</div>
</div>
<script>




$("#fullscreen-button").click(function(){
	if ((document.fullScreenElement && document.fullScreenElement !== null) ||    
	   (!document.mozFullScreen && !document.webkitIsFullScreen)) {
	    if (document.documentElement.requestFullScreen) {  
	      document.documentElement.requestFullScreen();  
	    } else if (document.documentElement.mozRequestFullScreen) {  
	      document.documentElement.mozRequestFullScreen();  
	    } else if (document.documentElement.webkitRequestFullScreen) {  
	      document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);  
	    }
	    $(this).text("Exit fullscreen");
	  } else {  
	    if (document.cancelFullScreen) {  
	      document.cancelFullScreen();  
	    } else if (document.mozCancelFullScreen) {  
	      document.mozCancelFullScreen();  
	    } else if (document.webkitCancelFullScreen) {  
	      document.webkitCancelFullScreen();  
	    }
	    $(this).text("Fullscreen Dashboard");
	  }  
});


function toggleFullScreen() {
	  if ((document.fullScreenElement && document.fullScreenElement !== null) ||    
	   (!document.mozFullScreen && !document.webkitIsFullScreen)) {
	    if (document.documentElement.requestFullScreen) {  
	      document.documentElement.requestFullScreen();  
	    } else if (document.documentElement.mozRequestFullScreen) {  
	      document.documentElement.mozRequestFullScreen();  
	    } else if (document.documentElement.webkitRequestFullScreen) {  
	      document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);  
	    }  
	  } else {  
	    if (document.cancelFullScreen) {  
	      document.cancelFullScreen();  
	    } else if (document.mozCancelFullScreen) {  
	      document.mozCancelFullScreen();  
	    } else if (document.webkitCancelFullScreen) {  
	      document.webkitCancelFullScreen();  
	    }  
	  }  
	}



$( "#tabs" ).tabs({
	create: function(event, ui){
		if(userProfileObj.role.idrole == 2 && userProfileObj.user.username != "demo"){$( "#tabs" ).tabs("disable",4)}
		if(isDemo)$( "#tabs" ).tabs("disable",3)
	},
    beforeLoad: function( event, ui ) {
      ui.jqXHR.fail(function() {
        ui.panel.html( "Couldn't load this tab. We'll try to fix this as soon as possible. ");
      });
    },
    activate : function(event, ui){
    	var tabsActive = $( "#tabs" ).tabs( "option", "active" );
    	if(tabsActive == 2){
    		trendStatsDataFlag = true;
    		periodStatsDataFlag = true;
    		valueStatsDataFlag = true;
    		//drawg();
    	}else if(tabsActive == 3){
    		if(isDemo){
    			alert("This function si not available in demo mode");
    		}else{
        		$("#pvalidation").css("display","grid");
        		setTimeout(setEvent,100,"PATV");
        		if(showPopupFlag){
        			showPopupMessage(pvalidationPopupTitle,pvalidationText);
        			showPopupFlag = false;
        		}
    		}
    	}else if(tabsActive == 4){
    		$("#pandi").css("display","grid");
    		setTimeout(setEvent,100,"PANDI");
    		if(ispandiLoaded){
    			drawExistingHistory(pandiObjects);
				drawNewHistory(pandiObjects);
    		}
    	}else if(tabsActive == 5){
    		$("#importomnilab").css("display","grid");
    	}
    }
});


var trendStatsDataFlag = false;
var periodStatsDataFlag = false;
var valueStatsDataFlag = false;

function drawg(){
	if(trendStatsDataFlag && periodStatsDataFlag && valueStatsDataFlag){
		
		paramObject1 = {"container":$("#trend-graph"),"data":trendStatsData};
		drawAG(paramObject1);
		paramObject2 = {"container":$("#period-graph"),"data":periodStatsData};
		drawL(paramObject2);
		paramObject3 = {"container":$("#value-graph"),"data":valueStatsData,"filter":appFilter};
		drawHbA1cValueLL(paramObject3);
		hideProgress($(".surveillance-stats"));
		trendStatsDataFlag = false;
		periodStatsDataFlag = false;
		valueStatsDataFlag = false;
	}else{
		setTimeout(drawg,500);
	}
}


if(userProfileObj.role.code!= "ROOT" && userProfileObj.role.code!= "ADMIN"){
	$("#admintab").remove();
	$("#tabs").tabs("refresh");
}





/*
if(userProfileObj.user.username != "radu"){
	$("#listtab").remove();
	$("#tabs").tabs("refresh");
}
*/

</script>
